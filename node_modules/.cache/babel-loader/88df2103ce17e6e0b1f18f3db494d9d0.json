{"ast":null,"code":"import _objectSpread from\"/home/wws/Desktop/financial-portfolio-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/wws/Desktop/financial-portfolio-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/wws/Desktop/financial-portfolio-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/wws/Desktop/financial-portfolio-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/wws/Desktop/financial-portfolio-tracker-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./Main.css';import Axios from'axios';import Navbar from'../../components/Navbar/Navbar';import MyStock from'../../components/MyStock/MyStock';import HorizontalLine from'../../components/HorizontalLine/HorizontalLine';import AddStocks from'../../components/AddStocks/AddStocks';import Modal from'./../../common/Modal/Modal';var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.state={myStocks:{},allStocks:{},showModal:false,selectedStock:{},dateError:false,dateErrorMsg:null,formComplete:false,formIncompleteError:false};_this.addStockHandler=function(stock){var selectedStock={};selectedStock.symbol=stock.symbol;selectedStock.name=stock.name;_this.setState({showModel:true,selectedStock:selectedStock});};_this.modalCloseHandler=function(){_this.setState({showModel:false});};_this.addStockToDBHandler=function(){if(_this.BuyingPrice.current.value.length===0||_this.BuyingDate.current.value.length===0||_this.NoOfShares.current.value.length===0){_this.setState({formComplete:false,formIncompleteError:true});}else{var selectedStock=_objectSpread({},_this.state.selectedStock);selectedStock.closingPrice=_this.BuyingPrice.current.value;selectedStock.numberOfShares=_this.NoOfShares.current.value;selectedStock.date=_this.BuyingDate.current.value;Axios.post('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json',selectedStock).then(function(response){// console.log(response);\nvar allStocks=_objectSpread({},_this.state.allStocks);var newAllStocks=[];for(var value in allStocks){if(allStocks[value].symbol!==_this.state.selectedStock.symbol){newAllStocks.push(allStocks[value]);}}var newMystocks={};Axios.get('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json').then(function(response){newMystocks=response.data;Axios.put('https://financial-portfolio-trac-178fd.firebaseio.com/allStocks.json',newAllStocks).then(function(response){_this.setState({selectedStock:{},showModel:false,allStocks:newAllStocks,myStocks:newMystocks});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});}};_this.dateHandler=function(event){if(new Date(event.target.value).getDay()===0||new Date(event.target.value).getDay()===6){_this.setState({dateError:true,dateErrorMsg:'you cannot select a weekend date'});}else if(new Date(event.target.value).getTime()>new Date().getTime()){_this.setState({dateError:true,dateErrorMsg:'you cannot select a future date'});}else{_this.setState({dateError:false,dateErrorMsg:null});}};_this.stopTrackingHandler=function(symbol){var myStocks=_this.state.myStocks;var newMystocks={};var newAllStocksValue={};for(var stock in myStocks){if(myStocks[stock].symbol!==symbol){newMystocks[stock]=myStocks[stock];}else{newAllStocksValue.name=myStocks[stock].name;newAllStocksValue.symbol=myStocks[stock].symbol;}}var newAllStocks=_this.state.allStocks;newAllStocks.push(newAllStocksValue);Axios.put('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json',newMystocks).then(function(response){Axios.put('https://financial-portfolio-trac-178fd.firebaseio.com/allStocks.json',newAllStocks).then(function(response){return response;}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});_this.setState({allStocks:newAllStocks,myStocks:newMystocks});};_this.NoOfShares=React.createRef();_this.BuyingPrice=React.createRef();_this.BuyingDate=React.createRef();return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('https://financial-portfolio-trac-178fd.firebaseio.com/allStocks.json').then(function(response){// console.log(response);\nvar allStocks=response.data;Axios.get('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json').then(function(response){// console.log(response);\n_this2.setState({myStocks:response.data,allStocks:allStocks});});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var modalContent=this.state.showModel?/*#__PURE__*/React.createElement(React.Fragment,null,this.state.formIncompleteError?/*#__PURE__*/React.createElement(\"p\",{style:{color:'red'}},\"Kindly complete the form before adding this stock for tracking\"):null,/*#__PURE__*/React.createElement(\"div\",{className:\"AddStockForm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"FormInput\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Lable\"},\"Company Name:\"),/*#__PURE__*/React.createElement(\"span\",{className:\"cname\"},this.state.selectedStock.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"FormInput\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Lable\"},\"No. of Shares:\"),/*#__PURE__*/React.createElement(\"input\",{id:\"noShares\",type:\"number\",min:\"1\",placeholder:\"No of Shares\",ref:this.NoOfShares})),/*#__PURE__*/React.createElement(\"div\",{className:\"FormInput\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Lable\"},\"Buy Price:\"),/*#__PURE__*/React.createElement(\"input\",{id:\"buyPrice\",type:\"number\",min:\"1\",placeholder:\"buying Price\",ref:this.BuyingPrice})),/*#__PURE__*/React.createElement(\"div\",{className:\"FormInput\"},/*#__PURE__*/React.createElement(\"span\",{className:\"Lable\"},\"Buy Date:\"),/*#__PURE__*/React.createElement(\"input\",{id:\"buyDate\",type:\"date\",onChange:this.dateHandler,ref:this.BuyingDate})),this.state.dateError?/*#__PURE__*/React.createElement(\"span\",{style:{color:'red'}},this.state.dateErrorMsg):null),/*#__PURE__*/React.createElement(\"button\",{className:\"AddButton\",disabled:this.state.formComplete,onClick:this.addStockToDBHandler},\"Add\")):null;return/*#__PURE__*/React.createElement(\"div\",null,this.state.showModel?/*#__PURE__*/React.createElement(Modal,{title:\"Add \".concat(this.state.selectedStock.name,\" to My Stocks\"),content:modalContent,close:this.modalCloseHandler}):null,/*#__PURE__*/React.createElement(Navbar,{title:\"Finance Portfolio Tracker\"}),/*#__PURE__*/React.createElement(MyStock,{myStocks:this.state.myStocks,stopTracking:this.stopTrackingHandler}),/*#__PURE__*/React.createElement(HorizontalLine,null),Object.keys(this.state.myStocks).length<5?/*#__PURE__*/React.createElement(AddStocks,{allStocks:this.state.allStocks,addStock:this.addStockHandler}):/*#__PURE__*/React.createElement(AddStocks,{error:'You can add only 5 stocks for tracking!'}));}}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["/home/wws/Desktop/financial-portfolio-tracker-app/src/pages/Main/Main.js"],"names":["React","Component","Axios","Navbar","MyStock","HorizontalLine","AddStocks","Modal","Main","props","state","myStocks","allStocks","showModal","selectedStock","dateError","dateErrorMsg","formComplete","formIncompleteError","addStockHandler","stock","symbol","name","setState","showModel","modalCloseHandler","addStockToDBHandler","BuyingPrice","current","value","length","BuyingDate","NoOfShares","closingPrice","numberOfShares","date","post","then","response","newAllStocks","push","newMystocks","get","data","put","catch","error","console","log","dateHandler","event","Date","target","getDay","getTime","stopTrackingHandler","newAllStocksValue","createRef","modalContent","color","Object","keys"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Main.css';\nimport Axios from 'axios';\nimport Navbar from '../../components/Navbar/Navbar';\nimport MyStock from '../../components/MyStock/MyStock';\nimport HorizontalLine from '../../components/HorizontalLine/HorizontalLine';\nimport AddStocks from '../../components/AddStocks/AddStocks';\nimport Modal from './../../common/Modal/Modal';\n\n\nclass Main extends Component {\n    constructor(props){\n        super(props);\n        this.NoOfShares = React.createRef();\n        this.BuyingPrice = React.createRef();\n        this.BuyingDate = React.createRef();\n    }\n    state = {\n        myStocks: {},\n        allStocks: {},\n        showModal : false,\n        selectedStock : {},\n        dateError : false,\n        dateErrorMsg : null,\n        formComplete : false,\n        formIncompleteError : false\n    }\n\n    componentDidMount() {\n        Axios.get('https://financial-portfolio-trac-178fd.firebaseio.com/allStocks.json')\n            .then(response => {\n                // console.log(response);\n                let allStocks = response.data;\n                    Axios.get('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json')\n                    .then(response => {\n                        // console.log(response);\n                    this.setState({\n                        myStocks: response.data,\n                        allStocks: allStocks\n                    })\n                })\n            \n            })\n            .catch(error => {console.log(error)});\n    }\n\n    addStockHandler = (stock) => {\n        let selectedStock = {};\n    \n        selectedStock.symbol = stock.symbol;\n        selectedStock.name = stock.name;\n\n        this.setState({\n            showModel : true,\n            selectedStock : selectedStock\n        })\n    }\n\n    modalCloseHandler = () => {this.setState({showModel : false})};\n   \n    addStockToDBHandler = () => {\n        if(this.BuyingPrice.current.value.length === 0 || this.BuyingDate.current.value.length === 0 || this.NoOfShares.current.value.length === 0){\n            this.setState({\n                formComplete : false,\n                formIncompleteError : true\n            })\n        }else{\n            let selectedStock = {...this.state.selectedStock}\n            selectedStock.closingPrice = this.BuyingPrice.current.value;\n            selectedStock.numberOfShares = this.NoOfShares.current.value;\n            selectedStock.date = this.BuyingDate.current.value;\n            \n            Axios.post('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json', selectedStock)\n                .then(response => {\n                    // console.log(response);\n                    let allStocks = {...this.state.allStocks};\n                    let newAllStocks = [];\n                    for(let value in allStocks){\n                        if(allStocks[value].symbol !== this.state.selectedStock.symbol){\n                            newAllStocks.push(allStocks[value]);\n                        }\n                    }\n\n                    let newMystocks = {};\n\n                    Axios.get('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json')\n                        .then(response => {\n                            newMystocks = response.data;\n                       Axios.put('https://financial-portfolio-trac-178fd.firebaseio.com/allStocks.json', newAllStocks)\n                            .then(response => {\n                                this.setState({\n                                    selectedStock : {},\n                                    showModel : false,\n                                    allStocks: newAllStocks,\n                                    myStocks : newMystocks\n                                })\n                        }).catch(error => {console.log(error)});\n                    }).catch(error => {console.log(error)});\n                }).catch(error => {console.log(error)});\n            }\n        }\n\n\n    dateHandler = (event) => {\n        if(new Date(event.target.value).getDay() === 0 || new Date(event.target.value).getDay() === 6){\n            this.setState({\n                dateError : true,\n                dateErrorMsg : 'you cannot select a weekend date'\n            })\n        }else if(new Date(event.target.value).getTime() > new Date().getTime()){\n            this.setState({\n                dateError : true,\n                dateErrorMsg : 'you cannot select a future date'\n            })\n\n        }else{\n            this.setState({\n                dateError : false,\n                dateErrorMsg : null\n            })\n        }\n    }\n\n    stopTrackingHandler = (symbol) => {\n        let myStocks = this.state.myStocks;\n        let newMystocks = {};\n        let newAllStocksValue = {};\n        for(let stock in myStocks){\n            if(myStocks[stock].symbol !== symbol){\n                newMystocks[stock] = (myStocks[stock]);\n            }else{\n                newAllStocksValue.name = myStocks[stock].name;\n                newAllStocksValue.symbol = myStocks[stock].symbol;\n            }\n        }\n        let newAllStocks = this.state.allStocks;\n        newAllStocks.push(newAllStocksValue);\n        Axios.put('https://financial-portfolio-trac-178fd.firebaseio.com/myStocks.json', newMystocks)\n        .then(response => {\n            Axios.put('https://financial-portfolio-trac-178fd.firebaseio.com/allStocks.json', newAllStocks)\n            .then(response => response)\n            .catch(error => {console.log(error)})\n        }).catch(error => {console.log(error)})\n        this.setState({\n            allStocks: newAllStocks,\n            myStocks: newMystocks\n        })\n    }\n    \n    render() {\n        let modalContent = this.state.showModel ? \n\n        (\n            <>\n            {this.state.formIncompleteError ? <p style={{color : 'red'}}>Kindly complete the form before adding this stock for tracking</p> : null}\n            <div className=\"AddStockForm\">\n             <div className=\"FormInput\"><span className=\"Lable\">Company Name:</span><span className=\"cname\">{this.state.selectedStock.name}</span></div>\n             <div className=\"FormInput\"><span className=\"Lable\">No. of Shares:</span><input id=\"noShares\" type=\"number\" min=\"1\" placeholder=\"No of Shares\" ref={this.NoOfShares}/></div>\n             <div className=\"FormInput\"><span className=\"Lable\">Buy Price:</span><input id=\"buyPrice\" type=\"number\" min=\"1\" placeholder=\"buying Price\" ref={this.BuyingPrice}/></div>\n             <div className=\"FormInput\"><span className=\"Lable\">Buy Date:</span><input id=\"buyDate\" type=\"date\" onChange={this.dateHandler} ref={this.BuyingDate}/></div>\n             {this.state.dateError ? <span style={{color : 'red'}}>{this.state.dateErrorMsg}</span> : null}\n            </div>\n            <button className=\"AddButton\" disabled={this.state.formComplete} onClick={this.addStockToDBHandler}>Add</button>\n            </>\n        )\n        :null;\n\n\n        return (\n            <div>\n                {\n                    this.state.showModel ?\n                    <Modal  \n                        title={`Add ${this.state.selectedStock.name} to My Stocks`}\n                        content = {modalContent}\n                        close = {this.modalCloseHandler}/> :\n                        null\n                }\n               <Navbar title=\"Finance Portfolio Tracker\" />\n               <MyStock myStocks = {this.state.myStocks} stopTracking = {this.stopTrackingHandler}/>\n               <HorizontalLine />\n               {\n                Object.keys(this.state.myStocks).length < 5 ?\n               <AddStocks allStocks = {this.state.allStocks} addStock={this.addStockHandler}/> :\n               <AddStocks error={'You can add only 5 stocks for tracking!'} />\n                }\n            </div>\n        )\n    }\n}\n\n\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}